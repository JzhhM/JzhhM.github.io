# 第1节：缓存
>我是jz，从业两年谈过需求，做过设计，组织过系统重构，执着于底层实现，立志做一个造轮子的开发。

## 一、前言
`多思，多想，多学，多做`

说到互联网技术，缓存永远是一个绕不开的话题。是高并发场景下提高热点数据访问的一个有效手段，那今天我们就好好的聊一聊缓存。

## 二、缓存类型
缓存类型主要分为三类：本地缓存、分布式缓存、多级缓存

### 1.本地缓存
本地缓存就是在进程的内存中进行缓存，比如 JVM堆中，可以使用LRUMap来实现，也可以使用Ehcache这样的工具来实现。直接通过内存访问，没有远程交互开销，性能最好
但受限于单机容量，一般缓存较小且无法拓展

### 2.分布式缓存
分布式缓存很好的解决了本地缓存的局限性，具有良好的水平拓展能力。但是性能不如本地缓存

### 3.多级缓存
为了平衡这种情况，实际的业务中，一般采用了多级缓存，本地缓存只保存访问频率最高的部分热点数据，其他的热点数据
放在分布式缓存中

## 三、多级缓存实现方案
多级缓存需要将访问频率最高的部分数据放入本地缓存，那么就会引发两个问题：如何发现热点key以及如何保证缓存一致性

### 1.如何发现热点key
当客户端getKey时，接入代理服务,根据配置热点key规则，维护热点key列表
1. 热点key:在本地缓存中获取数据，本地缓存中如无数据 通知redis同步数据
2. 非热点key:从redis中获取数据

### 2.如何保证缓存一致性
当客户端执行set del expire 时，会导致key值失效，代理服务根据key值列表 判断是否热点key
1. 热点key：删除本地缓存，移除热点key列表，通知redis
2. 非热点key：在redis中执行操作

## 四、总结
高并发场景下的架构设计需结合自身业务分析,以上多级缓存实现方案仅个人的一些想法，仅供参考
    